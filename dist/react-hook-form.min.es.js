import e,{useState as l,useEffect as t}from"react";import{useFormContext as a,Controller as r}from"react-hook-form";import{Checkbox as n,DatePicker as o,Input as s,InputNumber as i,Radio as d,Select as u}from"antd";import m from"moment";import"classnames";import"react-resizable";var c=Object.freeze({__proto__:null,get onRenderHooks(){return M},get BaseForm(){return h},get CheckBox(){return g},get DatePicker(){return _},get DateTimePicker(){return k},get Form(){return O},get Input(){return E},get InputNumber(){return w},get Radio(){return j},get Select(){return D}});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function p(e,l){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&l.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)l.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(t[a[r]]=e[a[r]])}return t}var b=".error {\n  width: auto;\n  min-height: 16px;\n  line-height: 18px;\n  color: #f5222d;\n  word-break: break-all;\n  word-wrap: break-word;\n}\n";const h=l=>{const{errors:t,control:n}=a(),{rules:o,label:s,value:i,input_type:d,name:u="",className:m="",disabled:h=!1,show_required:f=!0,extend_text:v="",is_required:g=2}=l,y=p(l,["rules","label","value","input_type","name","className","disabled","show_required","extend_text","is_required"]),_=Object.assign(Object.assign({},y),{value:i,defaultValue:i,disabled:h}),k=c[d];return k?e.createElement("div",{className:"hooks-row hooks-form-item",key:u||(new Date).getTime()},!!s&&e.createElement("div",{className:"hooks-col hooks-form-item-label"},e.createElement("label",{htmlFor:u},f&&((null==o?void 0:o.required)||1===g)&&e.createElement("span",{className:b.required},"*"),s)),e.createElement("div",{className:"hooks-col hooks-form-item-wrapper"},e.createElement(r,{as:e.createElement(k,Object.assign({},_)),defaultValue:i,control:n,rules:o,name:u}),e.createElement("div",{className:b.error}," ",t[u]&&t[u].message))):(console.log(`${d} 当前组件不支持`),null)},f=e=>e&&e instanceof Array&&!!e.length,{Group:v}=n,g=a=>{const{name:r,style:o,value:s,options:i,disabled:d,mode:u="default",show_all:m=!1,value_key:c="id",show_empty:b=!1,label_key:h="name",placeholder:g="请选择"}=a,y=p(a,["name","style","value","options","disabled","mode","show_all","value_key","show_empty","label_key","placeholder"]),[_,k]=l([]);t(()=>{f(i)&&k(i)},[h,i,m,c]);const O={mode:u,value:s,defaultValue:s,disabled:!!d,style:Object.assign({width:"100%"},o)};return f(_)?e.createElement(v,Object.assign({},O,y),_.map((l,t)=>e.createElement(n,Object.assign({},l,{value:`${l[c]}`,label:l[h],disabled:!!d||!!l.disabled,key:`${l[c]}-${t}`}),l[h])),b&&(()=>{if("default"===u){return!_.find(e=>e.id===s)&&e.createElement(n,{value:s},"==",s,"==无对应选项==")}if("multiple"===u){let l=[];return null==s||s.forEach(e=>{!_.find(l=>l[c]===e)&&l.push(e)}),e.createElement(e.Fragment,null,null==l?void 0:l.map(l=>e.createElement(n,{value:l},"==",l,"==无对应选项==")))}return null})()):e.createElement(v,Object.assign({},O,y))},y={year:"YYYY",month:"YYYY-MM",date:"YYYY-MM-DD",time:"YYYY-MM-DD HH:mm:ss"},_=t=>{const{placeholder:a="请选择",mode:r="date",onChange:n}=t,s=p(t,["placeholder","mode","onChange"]),{value:i,defaultValue:d}=s,[u,c]=l(i||d||void 0),b=e=>{e="month"===r?{start_time:e?`${e.format(y[r]||"YYYY-MM-DD")}-01`:void 0,end_time:e?`${e.format(y[r]||"YYYY-MM-DD")}-${e.daysInMonth()}`:void 0}:e?e.format(y[r]||"YYYY-MM-DD"):void 0,c(e),n&&n(e)},h=u?m(new Date((f=i)&&f instanceof Object&&!(f instanceof Array)&&Object.keys(f).length?i.start_time:i)):void 0;var f;const v=Object.assign(Object.assign({allowClear:!1,placeholder:a,style:{width:"100%"},showTime:"time"===r},s),{value:h,onChange:b,onPanelChange:b,format:y[r]||"YYYY-MM-DD"});return e.createElement(o,Object.assign({},v))},k=l=>e.createElement(_,Object.assign({},l,{mode:"time"})),O=l=>{const{data:t,children:a,defaultValues:r,layout:n="inline",labelAlign:o="right",hideRequiredMark:s=!1}=l,i=`hooks-form hooks-form-${n} label-${o} ${s?"hide_require":""}`;return e.createElement("form",{className:i},a||e.createElement(e.Fragment,null,t.map(e=>M(e,r))))},E=l=>{const{value:t,placeholder:a="请输入",style:r}=l,n=p(l,["value","placeholder","style"]);return e.createElement(s,Object.assign({key:`${l.id}-input`,autoComplete:"off"},n,{defaultValue:t,placeholder:a,style:r}))},w=l=>{const{placeholder:t="请输入"}=l,a=p(l,["placeholder"]);return e.createElement(i,Object.assign({},a,{placeholder:t}))},{Group:Y}=d,j=a=>{const{name:r,style:n,value:o,options:s,disabled:i,mode:u="default",value_key:m="id",show_empty:c=!1,label_key:b="name"}=a,h=p(a,["name","style","value","options","disabled","mode","value_key","show_empty","label_key"]),[v,g]=l([]);t(()=>{f(s)&&g(s)},[b,s,m]);const y={mode:u,value:o,defaultValue:o,disabled:!!i,style:Object.assign({width:"100%"},n)};return f(v)?e.createElement(Y,Object.assign({},y,h),v.map((l,t)=>e.createElement(d,Object.assign({},l,{value:`${l[m]}`,label:l[b],disabled:!!i||!!l.disabled,key:`${l[m]}-${t}`}),l[b])),c&&(()=>{if("default"===u){return!v.find(e=>e.id===o)&&e.createElement(d,{value:o},"==",o,"==无对应选项==")}return null})()):e.createElement(Y,Object.assign({},y,h))},{Option:$}=u,D=a=>{const{name:r,style:n,value:o,options:s,disabled:i,mode:d="default",show_all:m=!1,value_key:c="id",show_empty:b=!1,label_key:h="name",placeholder:v="请选择"}=a,g=p(a,["name","style","value","options","disabled","mode","show_all","value_key","show_empty","label_key","placeholder"]),[y,_]=l([]);t(()=>{if(f(s)){const e={[c]:"",[h]:"全部"};_(m?[e,...s]:s)}},[h,s,m,c]);const k={mode:d,value:o,placeholder:v,showSearch:!0,defaultValue:o,disabled:!!i,style:Object.assign({width:"100%"},n),filterOption:(e,l)=>{const{props:t}=l,a=t[h]||"";return!(e=e?e.replace(/(^\s*)|(\s*$)/g,""):null)||-1!==`${a}`.toLowerCase().indexOf(`${e}`.toLowerCase())}};return f(y)?e.createElement(u,Object.assign({},k,g,{placeholder:v}),y.map((l,t)=>e.createElement($,Object.assign({},l,{value:`${l[c]}`,label:l[h],disabled:!!i||!!l.disabled,key:`${l[c]}-${t}`}),l[h])),b&&(()=>{if("default"===d){return!y.find(e=>e.id===o)&&e.createElement($,{value:o},"==",o,"==无对应选项==")}if("multiple"===d){let l=[];return null==o||o.forEach(e=>{!y.find(l=>l[c]===e)&&l.push(e)}),e.createElement(e.Fragment,null,null==l?void 0:l.map(l=>e.createElement($,{value:l},"==",l,"==无对应选项==")))}return null})()):e.createElement(u,Object.assign({},k,g,{defaultValue:void 0}))},M=(l,t={})=>{if(!l)return null;if(l.is_hide)return null;const a=((e,l)=>{for(var t=/(?:(?:^|\.)([^\.\[\]]+))|(?:\[([^\[\]]+)\])/g,a=[],r=null;null!=(r=t.exec(l));)a.push(r[1]||r[2]);for(var n=e,o=0;o<a.length;o++)if(void 0===(n=null==n?void 0:n[a[o]]))return;return n})(t,null==l?void 0:l.name)||(null==l?void 0:l.defaultValue);return e.createElement(h,Object.assign({id:`form-${(null==l?void 0:l.element_id)||""}-${(null==l?void 0:l.name)||""}`,key:`form-${(null==l?void 0:l.element_id)||""}-${l.name}`,disabled:1===(null==t?void 0:t.disabled)||!0===(null==t?void 0:t.disabled)},l,{value:a}))};export{h as BaseForm,g as CheckBox,_ as DatePicker,k as DateTimePicker,O as Form,E as Input,w as InputNumber,j as Radio,D as Select,M as onRenderHooks};
